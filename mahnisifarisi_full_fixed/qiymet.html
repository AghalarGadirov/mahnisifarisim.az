<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8">
  <title>Qiym…ôt Siyahƒ±sƒ±</title>
  <style>
    body {
      background-color: #4A148C;
      color: white;
      font-family: sans-serif;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    .card {
      background-color: #6A1B9A;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 15px;
    }
    .title {
      font-size: 20px;
      font-weight: bold;
    }
    .prices {
      margin-top: 5px;
    }
    .old {
      text-decoration: line-through;
      margin-right: 10px;
      color: #E0E0E0;
    }
    .new {
      color: #00E676;
      font-size: 18px;
    }
    #countdown {
      text-align: center;
      font-size: 18px;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <h1>üí∞ Qiym…ôt Siyahƒ±sƒ±</h1>
  <div id="cards"></div>
  <div id="countdown">‚è≥ Endirim…ô qalan vaxt: Y√ºkl…ônir...</div>

  <script>
    fetch("https://mahnisifarisim-az.onrender.com/api/qiymet")
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById("cards");
        data.items.forEach(item => {
          const card = document.createElement("div");
          card.className = "card";
          card.innerHTML = `
            <div class="title">${item.title}</div>
            <div class="prices">
              <span class="old">${item.oldPrice}</span>
              <span class="new">${item.newPrice}</span>
            </div>
          `;
          container.appendChild(card);
        });

        const endTime = new Date(data.endTime);
        const countdownEl = document.getElementById("countdown");

        function updateCountdown() {
          const now = new Date();
          const diff = endTime - now;
          if (diff <= 0) {
            countdownEl.innerText = "‚è∞ Endirim m√ºdd…ôti bitdi";
            clearInterval(timer);
            return;
          }
          const days = Math.floor(diff / (1000 * 60 * 60 * 24));
          const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
          const minutes = Math.floor((diff / (1000 * 60)) % 60);
          const seconds = Math.floor((diff / 1000) % 60);
          countdownEl.innerText = `‚è≥ Endirim…ô qalan vaxt: ${days} g√ºn, ${hours} saat, ${minutes} d…ôq, ${seconds} san`;
        }

        updateCountdown();
        const timer = setInterval(updateCountdown, 1000);
      });
  </script>
</body>
</html>